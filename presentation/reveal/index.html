<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">

    <title>Backbone.js Workshop</title>
    <meta name="description" content="A framework for easily creating beautiful presentations using HTML">
    <meta name="author" content="Brian Peterson">

    <meta name="apple-mobile-web-app-capable" content="yes"/>
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"/>

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <link rel="stylesheet" href="css/theme/moon.css" id="theme">
    <link rel="stylesheet" href="css/reveal.css">

    <!-- For syntax highlighting -->
    <link rel="stylesheet" href="lib/css/zenburn.css">

    <!-- If the query includes 'print-pdf', use the PDF print sheet -->
    <script>
        document.write('<link rel="stylesheet" href="css/print/' + ( window.location.search.match(/print-pdf/gi) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">');
    </script>

    <!--[if lt IE 9]>
    <script src="lib/js/html5shiv.js"></script>
    <![endif]-->

</head>

<body>

<div class="reveal">


<!-- Any section element inside of this container is displayed as a slide -->
<div class="slides">
<section><h2>JS HTML5 Web App Workshop</h2>

    <p>With Backbone, Handlebars and Zurb Foundation</p></section>
<!--<section data-background="img/logo-small.jpg" data-background-size="400px"></section>-->
<!--Intro-->
<section><h2>Nvisia Welcome slide...details from Mark</h2></section>
<section><h2>Workshop Objectives</h2>
    <ul>
        <li>Learn what defines a Single Page Application(SPA)</li>
        <li>Discuss how SPA compares to classical web application architecture</li>
        <li>Touch briefly on other SPA frameworks and libraries</li>
        <li>Learn the basics of Backbone.js for a Responsive Design</li>
    </ul>

</section>

<!--What does audience want to learn-->
<section>
    <aside class="notes">
        <p>What JavaScript Frameworks/Libraries have people used?</p>

        <p>What other Web technologies?</p>

        <p>What are people hoping to learn?</p>
    </aside>
    <h2>Why are you here?</h2>
</section>

<!--History of Web-->
<section>
    <aside class="notes">
        <p>Old problems:</p>
        <ul>
            <li>Original use of HTML</li>
            <li>JavaScript and CSS landscape</li>
            <li>Ability to manipulate DOM gave behavior with a downside</li>
        </ul>
        <p>New landscape Points:</p>
        <ul>
            <li>Mobile apps leverage JSON data</li>
            <li>Native mobile apps are hard/different</li>
            <li>Mobile apps require more test resources due to device sizes</li>
            <li>Tablet market share has exploded</li>
        </ul>
    </aside>
    <h3>How did we get here?</h3>

    <h5>HTML from the beginning</h5>
    <ul>
        <li>Static HTML content</li>
        <li>Web Forms, Struts, ASP</li>
        <li>Server based MVC, JSPs</li>
        <li>JSON and AJAX for RESTful data</li>
        <li>JavaScript 'Goo', DOM manipulation</li>
        <div class="fragment current-visible">What is next...</div>
        <div class="fragment">
            <li>Structured JavaScript with HTML</li>
            <li>Beginning to embrace HTML5 and CSS3</li>
            <ul>
                <li>Need for a Mobile friendly solution</li>
                <li>Testability across platforms</li>
                <li>Desktop Application behaviors</li>
            </ul>
        </div>
    </ul>
</section>

<!--Compare SPA to Traditional -->
<section>
    <section>
        <h3>SPA over Traditional</h3>

        <ul>
            <li>The server no longer composes the page.
                <ul>
                    <li>A move to client side template engines.</li>
                    <li>Server generated views can still be integrated.</li>
                </ul>
            </li>
            <li>Server no longer maps page transitions.
                <ul>
                    <li>A move to client side routing methods.</li>
                    <li>Server managed routes still work.</li>
                </ul>
            </li>
        </ul>
    </section>
    <section>
        <h3>SPA over Traditional</h3>

        <ul>
            <li>Content reuse.
                <ul>
                    <li>Page footer/header/menu is delivered once.</li>
                    <li>Constants delivered to browser as needed.</li>
                </ul>
            </li>
            <li>No more screen “blink” or non-responsive wait.
                <ul>
                    <li>Developers control progress/wait display.</li>
                    <li>Long actions happen in the background.</li>
                </ul>
            </li>
            <li>Difference in separation of code and web design.</li>
        </ul>

    </section>
    <section>
        <h3>Traditional Web Flow</h3>

        <div>
            <img style="background-color: #EEE8D5;" src="img/TraditionalWebFlow.png" alt="SPA Trend" width="55%"/>
        </div>
    </section>
    <section><h3>SPA Web Flow</h3>
        <div>
            <img style="background-color: #EEE8D5;" src="img/SPAWebFlow.png" alt="SPA Trend" width="55%"/>
        </div>
    </section>
</section>

<!--Examples of SPA-->
<section>
    <h3>Examples</h3>

    <div style="text-align: center;">
        <ul>
            <li>Google Mail</li>
            <li>Facebook</li>
            <li>Twitter</li>
            <li>Many online email clients</li>
        </ul>
    </div>
</section>
<!--Different Flavors-->
<section>
    <aside class="notes">
        <div>Talk about Size vs Power vs. Complexity</div>

        <div>Architectural Control</div>

        <div>How to select framework
            <ul>
                <li>work environment</li>
                <li>existing works</li>
                <li>comfort with JavaScript</li>
                <li>Level of architectural control</li>
            </ul>
        </div>
    </aside>
    <h3>SPA Frameworks and Libraries</h3>

    <div style="vertical-align: top;padding-top: 3em;">

        <div style="display: inline-block;vertical-align: top;">
            <ul>
                <li>Backbone.js</li>
                <li>Angular.js</li>
                <li>Ember</li>
                <li>Knockout</li>
                <li>Others...</li>
            </ul>

        </div>
        <div style="display: inline-block;margin-left: 2em;vertical-align: top;">
            <img src="http://www.nvisia.com/sites/default/files/SPA-Trend-From-Indeed.png" alt="SPA Trend"/>
        </div>
    </div>

</section>
<section>
    <section>
        <h3>Backbone.js</h3>
        <img src="img/Backbone.png" alt="" height="75px"/>
        <div style="font-size: 0.8em">
            <ul>
                <li>Mature, with codebase leveling out. (less commits)</li>
                <li>Has dependencies on Underscore and JQuery.</li>
                <li>A smaller library providing structure to architect with.</li>
                <li>Add Marionette to go from library to framework.</li>
                <li>Can be “Injected” and used with other libraries or frameworks.</li>
                <li>Uses Underscore’s template method, but Handlebars or Mustache commonly used.</li>
                <li>Used in apps like FourSquare, GroupOn, USAToday and many more.</li>
            </ul>

        </div>
    </section>
    <section>
        <h3>AngularJs</h3>
        <img src="img/Angular.png" alt="" height="75px"/>
        <div style="font-size: 0.8em">
            <ul>
                <li>Established, Largest Growth, Google Approved!</li>
                <li>No dependencies.</li>
                <li>Inspired by Flex and Silverlight, so it’s declarative and has no ‘main’.</li>
                <li>A declarative framework, where you annotate HTML 5 with declarations.</li>
                <li>Doesn't require ‘full commitment‘.</li>
                <li>The dependency injection allows you to declaratively describe how your application is wired.</li>
                <li>Used for the PS3 Youtube app, whichairline.com, dailybreak, and many others.</li>
            </ul>

        </div>
    </section>
    <section>
        <h3>Ember</h3>
        <img src="img/Ember.png" alt="" height="75px"/>
        <div style="font-size: 0.8em">
            <ul>
                <li> The largest framework, twice the size of Angular.</li>
                <li>The evolution of the Cocoa inspired SproutCore’s move towards JQuery.</li>
                <li>Has dependencies on JQuery and Handlebars.</li>
                <li>Intended to control the whole page, so only suitable to be used alone.</li>
                <li>Depends on scaffolding and convention.</li>
                <li>Uses Handlebars for templates.</li>
                <li>Used by Zendesk, Square, LivingSocial and many more.</li>
            </ul>

        </div>
    </section>
    <section>
        <h3>Knockout</h3>
        <img src="img/Knockout.png" alt="" height="75px"/>
        <div style="font-size: 0.8em">
            <ul>
                <li>Developed by Steve Sanderson, currently working for Microsoft.</li>
                <li>Considered a MVVM library.</li>
                <li>Declarative syntax similar to Angular.</li>
                <li>Declarative DOM based templates, but can also do string based.</li>
                <li>Small codebase.</li>
                <li>Gives importance to compatibility with older browsers.</li>
                <li>Used for amctheatres.com, pillsbury.com, jsFiddle and many others.</li>
            </ul>

        </div>
    </section>
</section>
<!--Tool overview-->
<section><h3>Workshop tool overview</h3>

    <p><a href="http://backbonejs.org/" target="_blank">Backbone.js</a></p>
    <p><a href="http://underscorejs.org/" target="_blank">Underscore.js</a></p>
    <p><a href="http://handlebarsjs.com" target="_blank">Handlebars</a></p>
    <p><a href="http://foundation.zurb.com" target="_blank">Zurb Foundation for Responsive Web</a></p>
    <aside class="notes">
        <p>Typical layout is a 12 column wide view port</p>

        <p>Allows for good sizing across different browsers such as mobile, tablet and desktop</p>
    </aside>
</section>
<!--Narrative-->
<section>

    <section>
        <p style="margin-bottom: 15px;">Monday morning...</p>

        <div class="fragment">
            <p style="margin-bottom: 15px;">
                Your boss wants to quickly deploy a restaurant reservation system to take advantage of a new public
                rest
                api created by the chamber of commerce.</p>

            <p>It allows anyone to get information about restaurants and
                make
                reservations.
            </p>

            <p>The chamber of commerce plans to expand this service in the future, so she wants to
                get in
                on the ground floor.
            </p>

        </div>


    </section>
    <section>
        <p style="margin-bottom: 15px;">
            Since your boss wants this application quickly, the web designer has already created up a mock up
            for
            you to use in building the application.
        </p>

        <p> Since you’ve been hearing about building SPAs; you’ve decided to use Backbone to build the
            application.
        </p>
    </section>
    <section>
        <h3>Server Backend</h3>

        <p>Node.js running a filesystem database</p>
        <aside class="notes">
            <p><strong>Most</strong> services follow RESTful API</p>
        </aside>

        <table style="font-size: 0.5em;">
            <caption style="text-align: left; font-size: 1.5em;">REST Services</caption>
            <thead class="header">
            <th>Service URL</th>
            <th>Parameters</th>
            <th>Request Type</th>
            <th>Description</th>
            <tr>
            </tr>
            </thead>
            <tbody>
            <tr>
                <td>/restaurants</td>
                <td></td>
                <td>GET</td>
                <td>List of Restaurants</td>
            </tr>
            <tr>
                <td>/restaurants/:id</td>
                <td>:id ==> Restaurant Id</td>
                <td>GET</td>
                <td>Single Restaurant</td>
            </tr>
            <tr>
                <td>/restaurants/:id/reservations</td>
                <td>:id ==> Restaurant Id</td>
                <td>GET</td>
                <td>Get list of Reservations and Available Times for a Restaurant</td>
            </tr>
            <tr>
                <td>/reservations/:id</td>
                <td>:id ==> Reservation Id</td>
                <td>GET</td>
                <td>Get a single reservation</td>
            </tr>
            <tr>
                <td>/reservations/</td>
                <td>reservation request details.</td>
                <td>POST</td>
                <td>Save a Reservation</td>
            </tr>

            </tbody>
        </table>
    </section>
</section>
<section><h3>Britesnow.com</h3>
    <img src="img/html5-architecture-application.png" alt=""/>
</section>
<section><h3>Domain Model</h3>

    <div>
        <img width="60%" src="img/class-model.png"/>
    </div>
</section>

<section>
    <!-- Overview Code section-->
    <section>
        <h4>
            JavaScript Basics
        </h4>

        <p>...and then we'll start coding.</p>
        <ul>
            <li>Scoping our Modules</li>
            <li>What is meant by 'extend'.</li>
        </ul>

    </section>
    <section><h3>Scoping our Modules</h3>

        <div style="font-size: 0.8em;">
        <pre class="brush: js; ">

            /*
            * Snippet 1. Providing a scope for our modules.
            */
            (function () {
            "use strict";

            var RestaurantModule = {};
            window.RestaurantModule = RestaurantModule;

            return RestaurantModule; // Preparation for Require.js
            })();
            /*
            * end
            */
        </pre>
        </div>
    </section>
    <section>
        <h3>Extending a JavaScript 'Class'</h3>
        <span style="font-size:  1.0rem;">
        <pre class="brush: js; " data-trim>
            var Car = function(make, model) {
                this.make = make;
                this.model = model;
            };

            _.extend(Car.prototype, {
                drive: function() {
                    console.log('Vrooooom')
                },
                honk: function() {
                    console.log('Beep Beep');
                },
                toString: function() {
                    console.log("Hello world! I'm a " + this.make + " " + this.model + "!");
                }
            });

            var Truck = function() {
                Car.prototype.constructor.apply(this, arguments);
            };
            _.extend(Truck.prototype, Car.prototype, {
                honk: function () {
                    console.log('Hoooonk');
                },
                tow: function(thing) {
                    console.log('Towing ' + thing);
                }
            });
        </pre>
            </span>
    </section>
    <section>
        <h3>Extend example usage and Results</h3>
        <span style="font-size:  1.0rem;">
            <pre class="brush: js; " data-trim>
                var car = new Car('Ford', 'Escort');
                car.toString();
                car.drive();
                car.honk();
                try {
                    car.tow('stuff');
                } catch (err) {
                    console.warn(err.message);
                }
                
                var truck = new Truck('Chevy', 'Silverado');
                
                truck.toString();
                truck.drive();
                truck.honk();
                truck.tow('heavy things');
            </pre>
        </span>
        <span class="fragment">
            <img src="img/console-output.png">
        </span>
    </section>
</section>
<!--Sample of final application-->
<section><h3>Application Demo</h3>
    <a href="http://localhost:9000/index.html" target="_blank">SPA Application</a>
</section>
<section>
    <!-- Getting Started -->
    <section>
        <h3>Getting Started</h3>
        <ul>
            <li>The basic Model.</li>
            <li>The basic Collection.</li>
            <li>A quick wiring to REST.</li>
        </ul>
    </section>

    <!--Basic Model-->
    <section>
        <aside class="notes">
            <p>Defaults are not required.</p>

            <p>urlRoot is defined here because we will use it outside a collection</p>

            <p>If we were only using Restaurant within a Collection, we wouldn't need to specify anything in the
                model.</p>
        </aside>
        <h3>Creating a Basic Model</h3>
        <span style="font-size:  1.25rem;">
        <pre class="brush: js; ">
            RestaurantModule.Restaurant = Backbone.Model.extend({
                    defaults: {
                        name: "not found"
                    },
                    urlRoot: "/restaurants"
                });
            /*
             * end
             */
        </pre>`
        <a href="http://backbonejs.org/#Model" target="_blank">Backbone.js Model API</a>
        </span>
    </section>

    <!--Basic Collection-->
    <section>
        <aside class="notes">
            <p>By defining the model, we are able to retrieve the collection of models.</p>
            <p>The area tagged with 'Input into Firebug' only works because of the time it takes to type.</p>
            <p>Otherwise, the Restaurant collection would still be empty on the forEach.</p>
            <p>The forEach is from Underscore</p>
        </aside>
        <span style="font-size:  1.25rem;">
        <pre class="brush: js; ">
        /*
         * Snippet 4. A basic Collection    (restaurant.js)
         */
         RestaurantModule.RestaurantList = Backbone.Collection.extend({
                model: RestaurantModule.Restaurant,
                url: "/restaurants"
            });


        Input into Firebug:
        >>> var restaurants = new RestaurantModule.RestaurantList();
        >>> restaurants.fetch();
        >>> restaurants.forEach(function(r) { console.log(r.get('name') + ": " + r.get('id')) } )

        /*
         * end
         */
        </pre>
        <a href="http://backbonejs.org/#Collection" target="_blank">Backbone.js Collection API</a>
        </span>
    </section>
    <!--Output of manual request-->
    <section>
        <aside class="notes">
            <p>The results will vary due to node server creating the Restaurant Ids.</p>
        </aside>
        <span style="font-size:  1.25rem;">
        <pre class="brush: js; ">
            /*
             * Snippet 4. Output
             */

            Zarletti: 1ldmpLEtHGLCNmsI
            Mader's: BpbLDcavDPJN6Opm
            Kil@Wat: T2qnz5DwVU5hA0ar
            Sanford: U0ojeKMKybKeTLMx
            Eddie Martini's: aHsEQCTPyxqJguXe
            Hinterland Erie Street Gastropub: b0CoyLZckATxWzNd
            Carson's Ribs: go3IM27PHqaCWn1f
            Shogun: hInHppsH5Qv8momc
            Harbor House: wTbi8kZaYFiuZF7b
            Bartolotta's Lake Park Bistro: zEFtfkz3z3nx7qlh

            /*
             * end
             */
        </pre>
        </span>

    </section>
    <!--End of Overview-->
</section>

<section>
    <section>
        <aside class="notes">
            <strong>Clearly explain approach for exercises.</strong>
            <ol>
                <li>walk through code</li>
                <li>answer any questions</li>
                <li>Provide code on screen or via a link</li>
                <li>assist getting it to work.</li>
                <li>provide a reset point</li>
            </ol>
        </aside>
        <h3>Exercise #1</h3>
        <ol>
            <li>Create&NonBreakingSpace;Model</li>
            <li>Create&NonBreakingSpace;Collection</li>
            <li>Test&NonBreakingSpace;behavior</li>
        </ol>
    </section>
    <section>
        <h3>Create Model and Collection</h3>
        <span style="font-size:  1.25rem;">
        <pre class="brush: js; ">
            /**
             * Restaurant Module
             **/

            (function () {
                "use strict";

                var RestaurantModule = {};
                window.RestaurantModule = RestaurantModule;

                RestaurantModule.Restaurant = Backbone.Model.extend({
                    defaults: {
                        name: "not found"
                    },
                    urlRoot: "/restaurants"
                });

                RestaurantModule.RestaurantList = Backbone.Collection.extend({
                    model: RestaurantModule.Restaurant,
                    url: "/restaurants"
                });

                return RestaurantModule;  // Preparation for Require.js
            })();

            /*
             * end
             */
            </pre>
            </span>
    </section>
    <section>
        <h3>Test our results</h3>
        <p>Launch you node.js server and test the models</p>
        <p>
            View the restaurants with try_it.html
        </p>
        <a href="http://localhost:9000/try_it.html" target="_blank">http://localhost:9000/try_it.html</a>

        <blockquote>
            <p>Link to solution source: </p>
            <a href="https://github.com/NVISIA/BackboneWorkshop/blob/bw-ex1-sol/webapp/js/restaurant.js"
               target="_blank">restaurant.js</a>
        </blockquote>
        <p style="color: lawngreen">@TODO Need to get TinyURL for solution</p>

    </section>
    <section>
        <aside class="notes">
            <p>Make sure that when showing the git checkout, that they know it will wipe out their code.</p>
        </aside>
        <h3>
            Questions?
        </h3>
        <p></p>
        <div class="fragment">
            <p >To Reset, perform a git checkout</p>
            <pre><code class="script">
                Prompt:&gt; git checkout tags/EXERCISE1;
                 or
                Prompt:&gt; git checkout -f tags/EXERCISE1;
            </code></pre>
        </div>
    </section>
</section>


<section>
    <section>
        <h3>Creating the View</h3>
        <ul>
            <li>Introducing Handlebars!</li>
            <li>Changing what is displayed with helpers.</li>
            <li>A Basic View.</li>
            <li>A List View.</li>
        </ul>
    </section>
    <!--Handlebars-->
    <section>
        <h3>Basic Template</h3>
            <span style="font-size:  1.25rem;">
            <pre class="brush: js; ">
                <!--
                  -- A basic Handlebars template
                  -->

                 <div class="row">
                     {{#if hasData}}
                     <div>
                         <p>Price: {{showPrice price}}</p>
                     </div>
                     <div>
                         <p>Rating: {{showRating rating}}</p>
                     </div>
                     <div>
                         <p>Address: {{address}}</p>
                     </div>
                     {{/if}}
                 </div>

                 <!--
                  -- A basic Handlebars template
                  -->
            </pre>
            </span>

    </section>
    <section>
        <h3>Handlebars Helper functions</h3>
            <span style="font-size:  1.25rem;">
            <pre class="brush: js; ">
                /**
                  * Helpers located in BackboneWorkshop/webapp/js/handlebars-helpers.js
                  **/
                Handlebars.registerHelper('showPrice', function(price) {
                    var index, out = "";
                    for (index = 1; index <= price; index++) {
                        out += "$";
                    }

                    return out;
                });
            </pre>
            </span>
    </section>
    <section>
        <h3>More Complicated Template</h3>
        <span style="font-size:  1.25rem;">
        <pre class="brush: js; ">
            <!--
              -- Restaurant template (restaurant.handlebars)
              -->
             <div class="row">
                 <div class="large-12 columns">
                     <div class="callout panel">
                         <p><strong>{{name}}</strong>{{#if tagline}}<br/>{{/if}}{{tagline}}</p>
                         <div class="row">
                             <div class="large-3 medium-6 small-12 columns">
                                 <p>Price: {{showPrice price}}</p>
                             </div>
                             <div class="large-3 medium-6 small-12 columns">
                                 <p>Rating: {{showRating rating}}</p>
                             </div>
                             <div class="large-6 medium-12 small-12 columns">
                                 <p>Address: {{address}}</p>
                             </div>
                         </div>
                         <p>Description: {{description}} </p>
                         <div class="availableTimes">
                             <a href="#restaurant/{{id}}" name="restaurant-{{id}}" class="button restaurantRow" style="color: white;">Show Times</a>
                         </div>
                         <div class="reservationForm"></div>
                     </div>
                 </div>
             </div>
             <!-- end -->
        </pre>
        </span>

    </section>
    <section>
        <h3>Basic Backbone View</h3>
        <aside class="notes">
            <p>
                Templates are pre-compiled using a node.js plug-in.
            </p>
            <p>The templates are then attached to the Handlebars module on the templates object.</p>
        </aside>
        <span style="font-size:  1.25rem;">
        <pre class="brush: js; ">
            /*
             *  A basic View  (restaurant.js)
             */

            RestaurantModule.RestaurantView = Backbone.View.extend({
                initialize: function () {
                    this.template = Handlebars.templates.restaurant;
                },
                render: function () {
                    this.$el.html(this.template(this.model.toJSON()));
                    return this;
                }
            });

            /*
             * end
             */
        </pre>
        </span>
    </section>
    <section>
        <h3>View containing a Backbone Collection</h3>
        <span style="font-size:  1.25rem;">
        <pre class="brush: js; highlight:[6,7,8,9,16,17]">

        /*
         *  A Collection View (restaurant.js)
         */
        RestaurantModule.RestaurantListView = Backbone.View.extend({
            initialize: function () {
                this.template = Handlebars.templates.restaurantListView;
                this.restaurants = new RestaurantModule.RestaurantList();
                this.listenTo(this.restaurants, "add", this.addRestaurantView);
                this.restaurants.fetch();
            },
            render: function () {
                this.$el.html(this.template(this));
                return this;
            },
            addRestaurantView: function (restaurant) {
                var view = new RestaurantModule.RestaurantView({model: restaurant});
                this.$('.restaurantList').append(view.render().el);
            },
            count: function () {
                return this.restaurants.length;
            }
        });
        /* end */
        </pre>
        </span>
    </section>
    <section>
        <aside class="notes">
            <p style="margin-bottom: 20px;">
                Let's do a simple main to display our restaurants in the mock up that the web designer provided. This would
                give us something we could show our boss or bring to 'demo day' if we are doing Agile/Scrum.
            </p>

            <ul>Options:
                <li>Simple Main</li>
                <li>Basic Router</li>
                <li>Delegate to modules.</li>
                <li>Etc...</li>
            </ul>
        </aside>

        <h3>Connecting it all together</h3>
        <span style="font-size:  1.25rem;">
        <pre class="brush: js; ">
            /*
             *  A Simple Main     (application.js)
             */
            var allRestaurantView = new RestaurantModule.RestaurantListView();

            var allRestaurantContent = $("#restaurant-list-main");

            allRestaurantContent.empty();
            allRestaurantContent.append(allRestaurantView.render().el);

            /*
             * end
             */
        </pre>
        </span>
    </section>
</section>
<section>
    <section>
        <h3>Exercise #2</h3>
        <ol >
            <li>Create the simple Restaurant View</li>
            <li>Add code for the Restaurant List View</li>
            <li>Review the 'Simple Main' used to enable application</li>
            <li>Launch the Application</li>
        </ol>
    </section>
    <section>
        <blockquote>
            <p>Link to source: </p>
            <a href="https://github.com/NVISIA/BackboneWorkshop/blob/bw-ex2-sol/webapp/js/restaurant.js"
               target="_blank">restaurant.js</a>
        </blockquote>
        <blockquote>
            <p>Link to source: </p>
            <a href="https://github.com/NVISIA/BackboneWorkshop/blob/bw-ex2-sol/webapp/js/application.js"
               target="_blank">application.js</a>
        </blockquote>
        <p style="color: lawngreen">@TODO Need to get TinyURL for solution</p>
    </section>
    <section>
        <h3>Test our results</h3>
        <p>
            Launch the start of the application with index.html
        </p>
        <p>
            Application should show Restaurants but nothing is selectable.
        </p>
        <p>
            <a href="http://localhost:9000/index.html" target="_blank">http://localhost:9000/index.html</a>
        </p>
    </section>

    <section>
        <aside class="notes">
            <p>Make sure that when showing the git checkout, that they know it will wipe out their code.</p>
        </aside>
        <h3>
            Questions?
        </h3>
        <p></p>
        <p>
            <div class="fragment">
                <p >To Reset, perform a git checkout</p>
                <pre><code class="script">
                    Prompt:&gt; git checkout tags/EXERCISE2;
                    or
                    Prompt:&gt; git checkout -f tags/EXERCISE2;
                </code></pre>
            </div>
        </p>
    </section>

</section>

<section>
    <section>
        <h3>Adding Events and Routing</h3>
        <p>
        <ol>
            <li>Routers for selecting a restaurant.</li>
            <li>A little JQuery to control the main view.</li>
            <li>
                Modifications to modules and views.
                <ul>
                    <li>Get reservations from the server.</li>
                    <li>Add a time slot View.</li>
                    <li>Modify restaurant View to show times.</li>
                </ul>
            </li>
            <li>Looping: Template VS Views</li>
        </ol>
        </p>
    </section>
<!--Create the Router-->
    <section>
        <h3>Create the Router</h3>
        <span style="font-size:  1rem;">
        <pre class="brush: js; ">
    /* Create our router. (application.js) */
    $(document).ready(function(){
        var allRestaurantView = new RestaurantModule.RestaurantListView();

        var allRestaurantContent = $("#restaurant-list-main");
        var singleRestaurantContent = $("#selected-restaurant-main");

        allRestaurantContent.empty();
        allRestaurantContent.append(allRestaurantView.render().el);

        new (Backbone.Router.extend({
            routes: {
                "":"showRestaurants",
                "restaurant/:id": "selectRestaurant"
            },
            showRestaurants :function() {
                allRestaurantContent.show();
                singleRestaurantContent.hide();
            },
            selectRestaurant: function(id) {
                allRestaurantContent.hide();
                singleRestaurantContent.show();

                var selected = allRestaurantView.getRestaurantById(id);
                var singleRestaurantView = new RestaurantModule.RestaurantView({model:selected});
                singleRestaurantContent.empty().append(singleRestaurantView.el);
                singleRestaurantView.showTimes();
            }
        }))();

        allRestaurantView.on('ready', function() {
            Backbone.history.start();
        });
    });
    /* end */
        </pre>
        <p>
            <a href="http://backbonejs.org/#Router" target="_blank">Backbone.js Router API</a>
        </p>
        </span>

    </section>
    <!--Fetch Restaurants-->
    <section>
        <aside class="notes">
            <p>Walk the class through what each highlighted line is doing.</p>
        </aside>
        <h3>Adding non-standard AJAX request</h3>
        <span style="font-size:  1.0rem;">
        <pre class="brush: js; highlight: [9,10,11,12,13,14,15,16,17,18,19]">
    /*
     *  Update Restaurant to fetch its reservations.  (restaurant.js)
     */
   RestaurantModule.Restaurant = Backbone.Model.extend({
        defaults: {
            name: "not available"
        },
        urlRoot: "/restaurants",
        fetchReservations: function () {
            $.ajax('/restaurants/' + this.get('id') + '/reservations', {
                context: this,
                success: function (response) {
                    this.set({
                        'reservations': response.reservations,
                        'availableTimes': response.available
                    });
                    this.trigger('fetchComplete');
                },
                failure: function () {
                    console.log(['Something strange is afoot', arguments]);
                }
            });
        }
    });
    /*
     * end
     */

        </pre>
        </span>
    </section>
    <!--Add the Time Slot View (Available Times) -->
    <section>
        <h3>Defining the Time Slot View</h3>
        <span style="font-size:  1.25rem;">
            <pre class="brush: js; ">
                /*
                 *  Add a TimeSlotView to show the times. (restaurant.js)
                 */
                RestaurantModule.TimeSlotView = Backbone.View.extend({
                    initialize:function(options){
                        this.template = Handlebars.templates.availableTimes;
                    },
                    render:function(){
                        this.$el.html(this.template(this.model.toJSON()));
                        return this;
                    }
                });

                /*
                 * end
                 */
            </pre>
        </span>
    </section>
    <!--Set the times on the View from Results-->
    <section>
        <h3>Add the Available Times</h3>
        <span style="font-size:  1.25rem;">
        <pre class="brush: js; highlight:[5,6,7,14,15,16,19,20,21,22,23]">
    /*
     *  Update the RestaurantView to show the times.   (restaurant.js)
     */
    RestaurantModule.RestaurantView = Backbone.View.extend({
        defaults: {
            selected:false
        },
        initialize: function () {
            this.template = Handlebars.templates.restaurant;
            this.listenTo(this.model, 'fetchComplete', this.render);
        },
        render: function () {
            this.$el.html(this.template(this.model.toJSON()));
            if (this.selected){
                this.$el.find(".availableTimes").html(this.availableTimes.render().el);
            }
            return this;
        },
        showTimes: function(){
            this.selected=true;
            this.availableTimes = new RestaurantModule.TimeSlotView({model:this.model});
            this.model.fetchReservations();
        }
    });

    /*
     * end
     */
        </pre>
        </span>
    </section>
    <section>
        <h3>Add event handling</h3>
        <span style="font-size:  0.9rem;">
            <pre class="brush: js; highlight:[12,21,22,23,31,32,33,34]">
                /* Update the RestaurantView to add an event!    (restaurant.js) */
                  RestaurantModule.RestaurantView = Backbone.View.extend({
                    defaults: {
                        formView: undefined,
                        selected:false
                    },
                    events: {
                        'click .availableTime': 'selectTime'
                    },
                    initialize: function () {
                        this.template = Handlebars.templates.restaurant;
                        this.listenTo(this.model, 'fetchComplete', this.render);
                    },
                    render: function () {
                        if (this.formView) {
                            this.$el.find('.reservationForm').detach();
                            this.formView=undefined;
                        }

                        this.$el.html(this.template(this.model.toJSON()));
                        if (this.selected){
                            this.$el.find(".availableTimes").html(this.availableTimes.render().el);
                        }
                        return this;
                    },
                    showTimes: function(){
                        this.selected=true;
                        this.availableTimes = new RestaurantModule.TimeSlotView({model:this.model});
                        this.model.fetchReservations();
                    },
                    selectTime: function (event) {
                        var reservationTime = parseInt(event.currentTarget.getAttribute('value'));
                        console.log("selected time: " + reservationTime);
                    }
                });
                /* end */
            </pre>
        </span>
    </section>

    <section>
        <h3>Events when Restaurants Loaded</h3>
        <span style="font-size:  0.9rem;">
            <pre class="brush: js; highlight:[10,11,12,13,26,27,28]">
                /*
                 *  Update the RestaurantListView to notify listeners when it is done loading.  (restaurant.js)
                 */
                  RestaurantModule.RestaurantListView = Backbone.View.extend({
                    initialize: function () {
                        this.template = Handlebars.templates.restaurantListView;
                        this.restaurants = new RestaurantModule.RestaurantList();
                        this.listenTo(this.restaurants, "add", this.addRestaurantView);

                        _.bindAll(this, "fireReadyEvent");
                        this.restaurants.fetch({
                            success: this.fireReadyEvent
                        });
                    },
                    render: function () {
                        this.$el.html(this.template(this));
                        return this;
                    },
                    addRestaurantView: function (restaurant) {
                        var view = new RestaurantModule.RestaurantView({model: restaurant});
                        this.$('.restaurantList').append(view.render().el);
                    },
                    count: function () {
                        return this.restaurants.length;
                    },
                    fireReadyEvent: function () {
                        this.trigger('ready');
                    },
                    getRestaurantById:function(id){
                        return this.restaurants.get(id);
                    }
                });
                /* end */
            </pre>
        </span>
        <!-- ************************************************************* -->
    </section>

</section>





<section>
<!-- ************************************************************* -->
<div id="hb-template-2" class="step" data-x="8000" data-y="4000" >
        <span style="font-size:  1.25rem;">
        <pre class="brush: js; ">
    <!--
      -- Available Times template (availableTimes.handlebars)
      -->

     <form>
         <fieldset>
             <legend>Available Times</legend>

             <div class="row">
                 {{#each availableTimes}}
                 <div class="large-3 medium-4 small-6 columns availableTime" value="{{this}}">
                     {{showTime this}}
                 </div>
                 {{/each}}
             </div>
         </fieldset>
     </form>

     <!--
      -- end
      -->
        </pre>
        </span>
</div>
<!-- ************************************************************* -->
</section>

<section>
<div id="compare-1" class="step "  data-x="7500" data-y="4000" data-scale="1.25">

</div>
</section>

<section>
<!-- ************************************************************* -->
<div id="text-4" class="step slide" data-x="1000" data-y="6000">
    <p style="margin-bottom: 20px;">
    <ul>
        <li>You should now be able to select a restaurant, and then select a time.</li>
    </ul>
    </p>
    <p style="margin-bottom: 20px;">
        Questions?
    </p>
    <p>
        @TODO Information on github TAG, etc.
    </p>
    <p>
    <ul>
        <li>What's Next?</li>
        <li>We need to create a Reservation model and form so we can add a reservation.</li>
    </ul>
    </p>
    <ol>
        <li>Reservation Model</li>
        <li>Reservation View (A form)</li>
        <li>Update our Restaurant View to show the Reservation Form.</li>
        <li>Discuss the back/forward buttons.</li>
    </ol>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="code-20" class="step" data-x="2000" data-y="6000" >
        <span style="font-size:  1.5rem;">
        <pre class="brush: js;">
    /*
     *  Create a Reservation Model. (reservation.js)
     */
    Reservation.Model = Backbone.Model.extend({
        urlRoot: "/reservations"
    });
    /*
     * end
     */

        </pre>
        </span>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="code-21" class="step" data-x="3000" data-y="6000" >
        <span style="font-size:  1.2rem;">
        <pre class="brush: js;">
    /*
     *  Create a Reservation Form View. (reservation.js)
     */
     Reservation.FormView = Backbone.View.extend({
        initialize: function (options) {
            this.template = Handlebars.templates.reservationForm;
            this.model = new Reservation.Model({
                restaurantId: options.restaurantId,
                time: options.reservationTime
            });
        },
        render: function () {
            this.$el.html(this.template(this.model.toJSON()));
            return this;
        }
    });
    /*
     * end
     */

        </pre>
        </span>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="code-22" class="step" data-x="4000" data-y="6000" >
        <span style="font-size:  1.0rem;">
        <pre class="brush: js; highlight:[6,17,18,19,20,33,34,35,36,37,38,39,40,41]">
    /*
     *  Modify the Restaurant View to show the Reservation Form (restaurant.js)
     */
      RestaurantModule.RestaurantView = Backbone.View.extend({
        defaults: {
            formView: undefined,
            selected:false
        },
        events: {
            'click .availableTime': 'selectTime'
        },
        initialize: function () {
            this.template = Handlebars.templates.restaurant;
            this.listenTo(this.model, 'fetchComplete', this.render);
        },
        render: function () {
            if (this.formView) {
                this.$el.find('.reservationForm').detach();
                this.formView=undefined;
            }

            this.$el.html(this.template(this.model.toJSON()));
            if (this.selected){
                this.$el.find(".availableTimes").html(this.availableTimes.render().el);
            }
            return this;
        },
        showTimes: function(){
            this.selected=true;
            this.availableTimes = new RestaurantModule.TimeSlotView({model:this.model});
            this.model.fetchReservations();
        },
        selectTime: function (event) {
            var reservationTime = parseInt(event.currentTarget.getAttribute('value'));
            var view = new Reservation.FormView({
                restaurantId: this.model.get('id'),
                reservationTime: reservationTime
            });
            this.formView = view;
            this.$('.reservationForm').empty().append(view.render().el);
        }
    });
    /*
     * end
     */

        </pre>
        </span>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="text-5" class="step slide" data-x="5000" data-y="6000">
    <p style="margin-bottom: 20px;">
    <ul>
        <li>The Back Button</li>
    </ul>
    </p>
    <p style="margin-bottom: 20px;">
        The Back button should work! So should bookmarks!
    </p>
    <ul>
        <li>The application doesn't process routes until data is ready.</li>
        <li>Routes are used to direct the front end.</li>
    </ul>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="text-6" class="step slide" data-x="1000" data-y="8000">
    <p style="margin-bottom: 20px;">
    <ul>
        <li>You should now be able to select a restaurant, and then select a time.</li>
        <li>Selecting a time should present the Reservation form.</li>
    </ul>
    </p>
    <p style="margin-bottom: 20px;">
        Questions?
    </p>
    <p>
        @TODO Information on github TAG, etc.
    </p>
    <p>
    <ul>
        <li>What's Next?</li>
        <li>We need to process the Reservation form, sending the information to the server and showing confirmation.</li>
    </ul>
    </p>
    <ol>
        <li>Modify Reservation Form View to process input.</li>
        <li>Add code to save the Reservation on the server.</li>
        <li>Adding an additional 'confirmation' View.
            <ul>
                <li>Add a Reservation view that isn't a form.</li>
                <li>Add an additional Route to view a Reservation as a confirmation.</li>
            </ul>
        </li>
    </ol>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="code-23" class="step" data-x="2000" data-y="8000" >
        <span style="font-size:  .8rem;">
        <pre class="brush: js; highlight:[12]">
     //  Modify Reservation Form View to add events. (reservation.js)
     Reservation.FormView = Backbone.View.extend({
        events: {
            'change input[type="text"]': 'changeGenericValue',
            'change input[type="number"]': 'changeGenericValue',
            'change select': 'changeGenericValue',
            "keypress input[type='text']": 'actOnEnter',
            "keypress input[type='number']": 'actOnEnter',
            'click .submitButton': 'submitReservationRequest',
            'click .cancelButton': 'cancelReservationRequest'
        },
        initialize: function (options) { /* Code Cut For Brevity */  },
        render: function () {
            this.$el.html(this.template(this.model.toJSON()));
            return this;
        },
        changeGenericValue: function (event) {
            var sValue = $(event.currentTarget).val();
            var sName = $(event.currentTarget).attr("name");

            // This creates a data binding to the model based on the attributes name/value pair.
            var temp = {};
            temp[sName] = sValue;

            this.model.set(temp, {silent: true});
        },
        actOnEnter: function (event) {
            if (event.keyCode != 13) {
                return;
            }

            event.preventDefault();
            this.changeGenericValue(event);
        },
        submitReservationRequest: function () {
            this.model.save(this.model,
                {wait: true,
                    success: function (model, response, options) {
                        Backbone.history.navigate("/reservation/"+model.id,{trigger:true});
                    },
                    error: function (model, xhr, options) {
                        console.log("Snap goes the request.");
                    }
                }
            );
            return false;
        },
        cancelReservationRequest: function () {
            this.remove();
            return false;
        }
    });
    // end

        </pre>
        </span>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="code-24" class="step" data-x="3000" data-y="8000" >
        <span style="font-size:  .8rem;">
        <pre class="brush: js; highlight:[12]">
     //  Modify Reservation Form View to add events. (reservation.js)
     Reservation.FormView = Backbone.View.extend({
        events: {
            'change input[type="text"]': 'changeGenericValue',
            'change input[type="number"]': 'changeGenericValue',
            'change select': 'changeGenericValue',
            "keypress input[type='text']": 'actOnEnter',
            "keypress input[type='number']": 'actOnEnter',
            'click .submitButton': 'submitReservationRequest',
            'click .cancelButton': 'cancelReservationRequest'
        },
        initialize: function (options) { /* Code Cut For Brevity */  },
        render: function () {
            this.$el.html(this.template(this.model.toJSON()));
            return this;
        },
        changeGenericValue: function (event) {
            var sValue = $(event.currentTarget).val();
            var sName = $(event.currentTarget).attr("name");

            // This creates a data binding to the model based on the attributes name/value pair.
            var temp = {};
            temp[sName] = sValue;

            this.model.set(temp, {silent: true});
        },
        actOnEnter: function (event) {
            if (event.keyCode != 13) {
                return;
            }

            event.preventDefault();
            this.changeGenericValue(event);
        },
        submitReservationRequest: function () {
            this.model.save(this.model,
                {wait: true,
                    success: function (model, response, options) {
                        Backbone.history.navigate("/reservation/"+model.id,{trigger:true});
                    },
                    error: function (model, xhr, options) {
                        console.log("Snap goes the request.");
                    }
                }
            );
            return false;
        },
        cancelReservationRequest: function () {
            this.remove();
            return false;
        }
    });
    // end

        </pre>
        </span>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="code-25" class="step" data-x="4000" data-y="8000" >
        <span style="font-size:  .8rem;">
        <pre class="brush: js; ">
     // Create a Reservation View (reservation.js)
        Reservation.View = Backbone.View.extend({
        events:{
            'click .reset':'closeReservationView'
        },
        initialize: function () {
            this.template = Handlebars.templates.reservation;
            this.model = new Reservation.Model();
            this.restaurant = new RestaurantModule.Restaurant();

            this.listenTo(this.model,"sync",this.fetchRestaurant);
            this.listenTo(this.model,"change",this.render);
            _.bindAll(this,"fetchRestaurantSuccess");
            _.bindAll(this,"fetchReservationSuccess");
        },
        render: function () {
            this.$el.html(this.template(this.model.toJSON()));
            return this;
        },
        closeReservationView:function(){
            Backbone.history.navigate("/",{trigger:true});
        },
        fetchRestaurant:function(){
            this.restaurant.set({id:this.model.get("restaurantId")},{silent:true});
            this.restaurant.fetch({
                success: this.fetchRestaurantSuccess,
                error: function (model, xhr, options) {
                    console.log("Snap goes the request.");
                }
            });
        },
        fetchRestaurantSuccess:function(model, response, options) {
            this.model.set({restaurantName:model.get('name')});
        },
        fetchReservationSuccess:function(model, response, options) {
            this.restaurant.set({id:model.get("restaurantId")});
        },
        fetchReservation:function(reservationId){
            this.model.set({id:reservationId},{silent:true});
            this.model.fetch({
                    success: this.fetchReservationSuccess,
                    error: function (model, xhr, options) {
                        console.log("Snap goes the request.");
                    }
                }
            );
        }
    });
    // end

        </pre>
        </span>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="code-26" class="step" data-x="5000" data-y="8000" >
        <span style="font-size:  .8rem;">
        <pre class="brush: js; highlight:[6,15,21,26,33,34,35,36,37,38,39,40]">
     // Add a Reservation route to view completed reservations. (application.js)
     $(document).ready(function(){
        var allRestaurantView = new RestaurantModule.RestaurantListView();
        var allRestaurantContent = $("#restaurant-list-main");
        var singleRestaurantContent = $("#selected-restaurant-main");
        var reservationResultContent = $("#show-reservation-main");

        allRestaurantContent.empty();
        allRestaurantContent.append(allRestaurantView.render().el);

        new (Backbone.Router.extend({
            routes: {
                "":"showRestaurants",
                "restaurant/:id": "selectRestaurant",
                "reservation/:id":"showReservationResult"
            },

            showRestaurants :function() {
                allRestaurantContent.show();
                singleRestaurantContent.hide();
                reservationResultContent.hide();
            },
            selectRestaurant: function(id) {
                allRestaurantContent.hide();
                singleRestaurantContent.show();
                reservationResultContent.hide();

                var selected = allRestaurantView.getRestaurantById(id);
                var singleRestaurantView = new RestaurantModule.RestaurantView({model:selected});
                singleRestaurantContent.empty().append(singleRestaurantView.el);
                singleRestaurantView.showTimes();
            },
            showReservationResult:function(id){
                allRestaurantContent.hide();
                singleRestaurantContent.hide();
                reservationResultContent.show();
                var reservationView = new Reservation.View();
                reservationResultContent.empty().append(reservationView.el);
                reservationView.fetchReservation(id);
            }
        }))();

        allRestaurantView.on('ready', function() {
            Backbone.history.start();
        });
    });
    // end

        </pre>
        </span>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="text-7" class="step slide" data-x="1000" data-y="10000">
    <p style="margin-bottom: 20px;">
    <ul>
        <li>You should now be able to select a restaurant, and then select a time.</li>
        <li>Selecting a time should present the Reservation form.</li>
        <li>Submitting the form should present the Reservation page.</li>
    </ul>
    </p>
    <p style="margin-bottom: 20px;">
        Questions?
    </p>
    <p>
        @TODO Information on github TAG, etc.
    </p>
    <p>
    <ul>
        <li>What's Next?</li>
        <li>It's time to add validation to our reservation form.</li>
    </ul>
    </p>
    <ol>
        <li>A quick overview of validation.</li>
        <li>Add the Backbone.validation plugin.</li>
        <li>Add validation or our Reservation form View.</li>
    </ol>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="code-27" class="step" data-x="2000" data-y="10000" >
        <span style="font-size:  1.0rem;">
        <pre class="brush: js;">
    // Override how Backbone.validation handles validation messages. (application.js)

    // Extend backbone to find our error-box and show errors.
    _.extend(Backbone.Validation.callbacks, {
        valid: function (view, attr, selector) {
            view.$('[' + selector + '=' + attr + ']').removeClass('invalid');
            // remove from the list; and if empty; hide it.
            view.$('.error-box').find('li[name=' + attr + ']').remove();
            if (view.$('.error-box').find('ul li').length == 0) {
                view.$('.error-box').hide();
            }
        },
        invalid: function (view, attr, error, selector) {
            view.$('[' + selector + '=' + attr + ']').addClass('invalid');
            // show container, add to list (with name!).
            view.$('.error-box').find('li[name=' + attr + ']').remove();
            view.$('.error-box').show().find('.error-list').append(
                '<li name="' + attr + '">' + error + '</li>');
        }
    });
    // end
    <!--
        <div class="error-box">
            <ul class="error-list"></ul>
        </div>
    -->
    /*
    input.invalid {
        border: 2px solid red;
        background: yellow;
        font-size: 1.1em;
    }
    */

        </pre>
        </span>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="code-28" class="step" data-x="3000" data-y="10000" >
        <span style="font-size:  1.0rem;">
        <pre class="brush: js; highlight: [4,29]">
    // Add validation to the Reservation model. (reservation.js)
    Reservation.Model = Backbone.Model.extend({
        urlRoot: "/reservations",
        validation: {
            name: {
                required: true,
                minLength: 2,
                msg: "Please enter a valid first name"
            },
            phone: {
                required: true,
                fn: function (value) {
                    if (value !== undefined) {
                        var check = value.replace(/[\s\(\)]/g, '');
                        if (check.match(/^1?-?(\d{3})?-?\d{3}-?\d{4}$/) === null) {
                            return "Please enter a valid phone number"
                        }
                    }
                }
            },
            guests: {
                required: true,
                pattern: 'digits',
                range: [1, 10]
            },
            time: {
                required: true
            }
        }
    });

    // end

        </pre>
        </span>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="code-29" class="step" data-x="4000" data-y="10000" >
        <span style="font-size:  1.0rem;">
        <pre class="brush: js; highlight: [11,20,21,31]">
    // Modify the submission of the form to check validation. (reservation.js)
    Reservation.FormView = Backbone.View.extend({
        events: { /* ... */ },
        initialize: function (options) {
            this.template = Handlebars.templates.reservationForm;
            this.model = new Reservation.Model({
                restaurantId: options.restaurantId,
                time: options.reservationTime
            });

            Backbone.Validation.bind(this);
        },
        render: function () {
            this.$el.html(this.template(this.model.toJSON()));
            return this;
        },
        changeGenericValue: function (event) { /* ... */ },
        actOnEnter: function (event) {  /* ... */  },
        submitReservationRequest: function () {
            var validationResults = this.model.validate();
            if (this.model.isValid()) {
                this.model.save(null, {
                    success: function (model, response, options) {
                        console.log("SUCCESS");
                        Backbone.history.navigate("reservation/" + model.id, { trigger:true });
                    },
                    error: function (model, xhr, options) {
                        console.log("Snap goes the request.");
                    }
                });
            }
            return false;
        },
        cancelReservationRequest: function () {
            this.remove();
            return false;
        }
    });

    // end

        </pre>
        </span>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="text-8" class="step slide" data-x="1000" data-y="12000">
    <p style="margin-bottom: 20px;">
    <ul>
        <li>You should now be able to select a restaurant, and then select a time.</li>
        <li>Selecting a time should present the Reservation form.</li>
        <li>Submitting the form should present the Reservation page.</li>
        <li>You should no longer be able to commit an invalid reservation form.</li>
    </ul>
    </p>
    <p style="margin-bottom: 20px;">
        Questions?
    </p>
    <p>
        There is no Github tag, this was includes with the Validation code.
    </p>
    <p>
    <ul>
        <li>What's Next?</li>
        <li>Testing with QUnit.</li>
    </ul>
    </p>
    <ol>
        <li>We'll use QuUnit to test some our form validation.</li>
    </ol>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="code-30" class="step" data-x="2000" data-y="12000" >
        <span style="font-size:  1.0rem;">
        <pre class="brush: js;">
     // Modify the submission of the form to check validation. (reservation.js)
     var getReservation = function() {
        return new Reservation.Model({
            id: 'abc123',
            restaurantId: 'zyx987',
            name: 'Jerry Rice',
            phone: '1-800-123-4567',
            guests: 1,
            time: new Date().getTime()
        });
    };

    test("name-validation", function() {
        expect(2);

        var reservation = getReservation();
        ok(reservation.isValid(true), "Check valid model");

        reservation = getReservation();
        reservation.set('name', 'A');
        ok(reservation.isValid(true) === false, "Name is too short");
    });

    test("guests-validation", function() {

    });

    test("time-validation", function() {

    });

    test("phone-validation", function() {

    });

    // end

        </pre>
        </span>
</div>
<!-- ************************************************************* -->
</section>

<section>
<!-- ************************************************************* -->
<div id="text-9" class="step slide" data-x="1000" data-y="14000">
    <p style="margin-bottom: 20px;">
    <ul>
        <li>You should now be able to select a restaurant, and then select a time.</li>
        <li>Selecting a time should present the Reservation form.</li>
        <li>Submitting the form should present the Reservation page.</li>
        <li>You should no longer be able to commit an invalid reservation form.</li>
        <li>We have some basic tests in place for our form.</li>
    </ul>
    </p>
    <p style="margin-bottom: 20px;">
        Questions?
    </p>
    <p>
    <ul>
        <li>What's Next?</li>
        <li>Advanced Topics Demos</li>
    </ul>
    </p>
    <ol>
        <li>If we have time, we'll demo some advanced topics to give you an idea of their role in your project.</li>
        <li>Security</li>
        <li>Mobile</li>
    </ol>
</div>
</section>

<!-- ************************************************************* -->
<section><h3>Taking it Further</h3>
<ul>
    <li>Marionette</li>
    <li>Security</li>
    <li>Unit Testing</li>
    <li>Binding Frameworks</li>
</ul>
</section>
<section><h3>Contact Us (from Mark)</h3></section>
<!--More Info-->
<section><h3>More Information</h3>

    <p><a href="http://backbonejs.org/" target="_blank">Backbone.js - http://backbonejs.org</a></p>

    <p><a href="http://underscorejs.org/" target="_blank">Underscore.js - http://underscorejs.org</a></p>

    <p><a href="http://handlebarsjs.com" target="_blank">Handlebars - http://handlebarsjs.com</a></p>

    <aside class="notes">
        Microsoft's opinion on SPA.
    <p><a href="http://msdn.microsoft.com/en-us/magazine/dn463786.aspx" target="_blank">Microsoft SPA with
        ASP.Net</a></p>
    </aside>
</section>

</div>

<script src="lib/js/head.min.js"></script>
<script src="js/reveal.js"></script>

<script>

    Reveal.initialize({
        controls: true,
        progress: true,
        history: true,
        center: true,

        theme: Reveal.getQueryHash().theme, // available themes are in /css/theme
        transition: Reveal.getQueryHash().transition || 'fade', // default/cube/page/concave/zoom/linear/fade/none

        // Parallax scrolling
        // parallaxBackgroundImage: 'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg',
        // parallaxBackgroundSize: '2100px 900px',

        // Optional libraries used to extend on reveal.js
        dependencies: [
            { src: 'lib/js/classList.js', condition: function () {
                return !document.body.classList;
            } },
            { src: 'plugin/markdown/marked.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            } },
            { src: 'plugin/markdown/markdown.js', condition: function () {
                return !!document.querySelector('[data-markdown]');
            } },
            { src: 'plugin/highlight/highlight.js', async: true, callback: function () {
                hljs.initHighlightingOnLoad();
            } },
            { src: 'plugin/zoom-js/zoom.js', async: true, condition: function () {
                return !!document.body.classList;
            } },
            { src: 'plugin/notes/notes.js', async: true, condition: function () {
                return !!document.body.classList;
            } }
        ]
    });
    Reveal.configure({ slideNumber: true });


</script>
<script type="text/javascript" src="scripts/shCore.js"></script>

<script type="text/javascript" src="scripts/shBrushJScript.js"></script>
<link type="text/css" rel="stylesheet" href="styles/shCoreDefault.css"/>
<link rel="stylesheet" type="text/css" href="styles/shThemeDefault.css"/>


<script type="text/javascript">SyntaxHighlighter.all();</script>

</body>
</html>
